<div class="space-y-12 animate-fadeIn relative pb-24">
    <!-- Progress Bar (Sleek 2-Step) -->
    <div class="max-w-xl mx-auto mb-16 px-4">
        <div class="flex justify-between items-center mb-6">
            <h4 class="text-[10px] font-black uppercase tracking-[0.4em] text-slate-400">Progression de l'Estimation
            </h4>
            <span id="progress-text"
                class="text-[10px] font-black text-brand-600 dark:text-brand-400 uppercase tracking-widest">Étape 1 sur
                2</span>
        </div>
        <div class="h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden">
            <div id="form-progress-bar"
                class="h-full bg-brand-600 transition-all duration-700 ease-out w-1/2 shadow-[0_0_15px_rgba(37,99,235,0.3)]">
            </div>
        </div>

        <div class="flex justify-between mt-8 relative px-10">
            <div
                class="absolute top-7 left-0 w-full h-px border-t border-dashed border-slate-200 dark:border-slate-700 -z-10">
            </div>

            <button type="button" class="step-btn active group flex flex-col items-center space-y-3 focus:outline-none"
                data-step="1">
                <div
                    class="w-12 h-12 rounded-xl bg-brand-600 text-white flex items-center justify-center font-black text-lg shadow-xl shadow-brand-500/20 ring-4 ring-white dark:ring-slate-900 group-hover:scale-110 transition-all duration-300">
                    <span class="step-num">1</span>
                </div>
                <span class="text-[9px] font-black uppercase tracking-[0.2em] text-brand-600">L'Essentiel</span>
            </button>

            <button type="button" class="step-btn group flex flex-col items-center space-y-3 focus:outline-none"
                data-step="2">
                <div
                    class="w-12 h-12 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-400 flex items-center justify-center font-black text-lg ring-4 ring-white dark:ring-slate-900 group-hover:scale-110 transition-all duration-300">
                    <span class="step-num">2</span>
                </div>
                <span class="text-[9px] font-black uppercase tracking-[0.2em] text-slate-400">Configuration</span>
            </button>
        </div>
    </div>

    <!-- Form Content -->
    <form id="house-prediction-form" class="max-w-4xl mx-auto" novalidate>
        <!-- Step 1: L'Essentiel -->
        <div id="form-step-1" class="space-y-10 animate-fadeIn">
            <!-- Overall Quality Slider (Hero Field) -->
            <div
                class="bg-gradient-to-br from-slate-50 to-white dark:from-slate-800/30 dark:to-slate-900/40 p-10 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm border-b-4 border-b-brand-500/20">
                <div class="flex items-center justify-between mb-8">
                    <div class="space-y-1">
                        <h5 class="text-xs font-black uppercase tracking-widest text-slate-900 dark:text-white">Qualité
                            Globale de Construction</h5>
                        <p class="text-[10px] text-slate-400 font-medium tracking-wide">Évaluez la structure et les
                            finitions de 1 à 10</p>
                    </div>
                    <span class="text-4xl font-black text-brand-600" id="val-OverallQual">7<span
                            class="text-slate-300 text-lg">/10</span></span>
                </div>
                <input type="range" name="OverallQual" min="1" max="10" value="7"
                    class="w-full h-2.5 bg-slate-200 dark:bg-slate-700 rounded-full appearance-none cursor-pointer accent-brand-600 focus:ring-0">
                <div
                    class="flex justify-between mt-6 px-1 text-[8px] font-black text-slate-400 uppercase tracking-widest">
                    <span>Standard</span>
                    <span>Moyen</span>
                    <span class="text-brand-600">Premium</span>
                    <span>Luxe</span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12">
                <!-- Neighborhood -->
                <div class="space-y-3">
                    <label class="text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1">Quartier
                        Géographique</label>
                    <div class="relative group">
                        <select name="Neighborhood" required
                            class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl px-6 py-5 focus:border-brand-500 appearance-none font-bold text-slate-900 dark:text-white transition-all shadow-sm">
                            <option value="CollgCr">College Creek</option>
                            <option value="NoRidge">Northridge (Premium)</option>
                            <option value="Crawfor">Crawford</option>
                            <option value="NridgHt">Northridge Heights</option>
                            <option value="OldTown">Old Town</option>
                            <option value="Somerst">Somerset</option>
                            <option value="Edwards">Edwards</option>
                            <option value="Gilbert">Gilbert</option>
                            <option value="SawyerW">Sawyer West</option>
                            <option value="Mitchel">Mitchell</option>
                            <option value="NAmes">North Ames</option>
                            <option value="NWAmes">Northwest Ames</option>
                        </select>
                        <div class="absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"><svg
                                class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                    d="M19 9l-7 7-7-7"></path>
                            </svg></div>
                    </div>
                </div>

                <!-- GrLivArea -->
                <div class="space-y-3">
                    <label class="text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1">Surface
                        Habitable (GrLivArea)</label>
                    <div class="relative group">
                        <input type="number" name="GrLivArea" value="1500" required
                            class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl px-6 py-5 focus:border-brand-500 font-bold text-slate-900 dark:text-white outline-none transition-all shadow-sm">
                        <span
                            class="absolute right-6 top-1/2 -translate-y-1/2 text-slate-300 font-bold text-xs">FT²</span>
                    </div>
                </div>

                <!-- Year Built -->
                <div class="space-y-3">
                    <label class="text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1">Année de
                        Construction</label>
                    <input type="number" name="YearBuilt" min="1800" max="2026" value="2005" required
                        class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl px-6 py-5 focus:border-brand-500 font-bold text-slate-900 dark:text-white outline-none transition-all shadow-sm">
                </div>

                <!-- Lot Area -->
                <div class="space-y-3">
                    <label class="text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1">Surface du
                        Terrain</label>
                    <div class="relative group">
                        <input type="number" name="LotArea" value="8500" required
                            class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl px-6 py-5 focus:border-brand-500 font-bold text-slate-900 dark:text-white outline-none transition-all shadow-sm">
                        <span
                            class="absolute right-6 top-1/2 -translate-y-1/2 text-slate-300 font-bold text-xs">FT²</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Configuration & Confort (Hidden) -->
        <div id="form-step-2" class="hidden space-y-10 animate-fadeIn">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Garage -->
                <div
                    class="p-8 bg-slate-50 dark:bg-slate-800/40 rounded-3xl border border-slate-100 dark:border-slate-700/50 space-y-4">
                    <p class="text-[9px] font-black uppercase tracking-widest text-slate-400">Capacité Garage</p>
                    <div class="flex items-center justify-between">
                        <input type="number" name="GarageCars" value="2"
                            class="w-full bg-transparent border-none text-3xl font-black text-brand-600 focus:ring-0 p-0">
                        <span class="text-slate-300 font-bold italic text-[10px] uppercase">Voyage(s)</span>
                    </div>
                </div>

                <!-- Bathrooms -->
                <div
                    class="p-8 bg-slate-50 dark:bg-slate-800/40 rounded-3xl border border-slate-100 dark:border-slate-700/50 space-y-4">
                    <p class="text-[9px] font-black uppercase tracking-widest text-slate-400">Salles de Bain</p>
                    <div class="flex items-center justify-between">
                        <input type="number" name="FullBath" value="2"
                            class="w-full bg-transparent border-none text-3xl font-black text-brand-600 focus:ring-0 p-0">
                        <span class="text-slate-300 font-bold italic text-[10px] uppercase">Complète(s)</span>
                    </div>
                </div>

                <!-- Bedrooms -->
                <div
                    class="p-8 bg-slate-50 dark:bg-slate-800/40 rounded-3xl border border-slate-100 dark:border-slate-700/50 space-y-4">
                    <p class="text-[9px] font-black uppercase tracking-widest text-slate-400">Chambres</p>
                    <div class="flex items-center justify-between">
                        <input type="number" name="BedroomAbvGr" value="3"
                            class="w-full bg-transparent border-none text-3xl font-black text-brand-600 focus:ring-0 p-0">
                        <span class="text-slate-300 font-bold italic text-[10px] uppercase">Chambre(s)</span>
                    </div>
                </div>
            </div>

            <div class="space-y-3">
                <label class="text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1">Type de
                    Logement</label>
                <div class="relative group">
                    <select name="BldgType" required
                        class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-2xl px-6 py-5 focus:border-brand-500 appearance-none font-bold text-slate-900 dark:text-white transition-all shadow-sm">
                        <option value="1Fam">Maison Individuelle</option>
                        <option value="TwnhsE">Townhouse (Extremité)</option>
                        <option value="Duplex">Duplex</option>
                        <option value="Twnhs">Townhouse (Intérieur)</option>
                        <option value="2fmCon">Conversion 2 Familles</option>
                    </select>
                    <div class="absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"><svg
                            class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7">
                            </path>
                        </svg></div>
                </div>
            </div>

            <!-- Advanced Calibration (Collapsible) -->
            <div class="mt-8 border-t border-slate-100 dark:border-slate-800/50 pt-8">
                <button type="button" id="toggle-advanced-fields"
                    class="flex items-center space-x-2 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-brand-600 transition-colors">
                    <svg id="advanced-toggle-icon" class="w-4 h-4 transform transition-transform" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path>
                    </svg>
                    <span>Paramètres Avancés & Calibration (Facultatif)</span>
                </button>

                <div id="advanced-fields-container"
                    class="hidden mt-8 p-10 bg-slate-50 dark:bg-slate-800/20 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 space-y-8 animate-fadeIn">
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="space-y-2">
                            <span class="text-[8px] font-bold text-slate-400 uppercase tracking-tight">Condition
                                Globale</span>
                            <input type="number" name="OverallCond" value="5"
                                class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-xl px-4 py-3 font-bold text-sm outline-none">
                        </div>
                        <div class="space-y-2">
                            <span class="text-[8px] font-bold text-slate-400 uppercase tracking-tight">Surface
                                Sous-Sol</span>
                            <input type="number" name="TotalBsmtSF" value="1000"
                                class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-xl px-4 py-3 font-bold text-sm outline-none">
                        </div>
                        <div class="space-y-2">
                            <span class="text-[8px] font-bold text-slate-400 uppercase tracking-tight">Surface
                                Garage</span>
                            <input type="number" name="GarageArea" value="500"
                                class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-xl px-4 py-3 font-bold text-sm outline-none">
                        </div>
                        <div class="space-y-2">
                            <span class="text-[8px] font-bold text-slate-400 uppercase tracking-tight">Équipement
                                Cuisine</span>
                            <select name="KitchenQual"
                                class="w-full bg-white dark:bg-slate-800 border-2 border-slate-100 dark:border-slate-700 rounded-xl px-4 py-3 font-bold text-xs outline-none">
                                <option value="Ex">Excellent</option>
                                <option value="Gd" selected>Haut de gamme</option>
                                <option value="TA">Standard</option>
                                <option value="Fa">Usage Modeste</option>
                            </select>
                        </div>
                    </div>

                    <!-- Silent Hidden Fields -->
                    <div class="opacity-0 h-0 overflow-hidden">
                        <input type="hidden" name="CentralAir" value="Y"><input type="hidden" name="TotRmsAbvGrd"
                            value="7"><input type="hidden" name="MSSubClass" value="60"><input type="hidden"
                            name="MSZoning" value="RL"><input type="hidden" name="Street" value="Pave"><input
                            type="hidden" name="LotShape" value="Reg"><input type="hidden" name="LandContour"
                            value="Lvl"><input type="hidden" name="Utilities" value="AllPub"><input type="hidden"
                            name="LotConfig" value="Inside"><input type="hidden" name="LandSlope" value="Gtl"><input
                            type="hidden" name="Condition1" value="Norm"><input type="hidden" name="Condition2"
                            value="Norm"><input type="hidden" name="HouseStyle" value="2Story"><input type="hidden"
                            name="YearRemodAdd" value="2005"><input type="hidden" name="RoofStyle" value="Gable"><input
                            type="hidden" name="RoofMatl" value="CompShg"><input type="hidden" name="Exterior1st"
                            value="VinylSd"><input type="hidden" name="Exterior2nd" value="VinylSd"><input type="hidden"
                            name="ExterQual" value="Gd"><input type="hidden" name="ExterCond" value="TA"><input
                            type="hidden" name="Foundation" value="PConc"><input type="hidden" name="Heating"
                            value="GasA"><input type="hidden" name="HeatingQC" value="Ex"><input type="hidden"
                            name="1stFlrSF" value="1000"><input type="hidden" name="2ndFlrSF" value="1000"><input
                            type="hidden" name="LowQualFinSF" value="0"><input type="hidden" name="HalfBath"
                            value="1"><input type="hidden" name="KitchenAbvGr" value="1"><input type="hidden"
                            name="Functional" value="Typ"><input type="hidden" name="Fireplaces" value="1"><input
                            type="hidden" name="PavedDrive" value="Y"><input type="hidden" name="WoodDeckSF"
                            value="100"><input type="hidden" name="OpenPorchSF" value="50"><input type="hidden"
                            name="EnclosedPorch" value="0"><input type="hidden" name="3SsnPorch" value="0"><input
                            type="hidden" name="ScreenPorch" value="0"><input type="hidden" name="PoolArea"
                            value="0"><input type="hidden" name="MiscVal" value="0"><input type="hidden" name="MoSold"
                            value="6"><input type="hidden" name="YrSold" value="2008"><input type="hidden"
                            name="SaleType" value="WD"><input type="hidden" name="SaleCondition" value="Normal">
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation UI -->
        <div
            class="mt-16 pt-8 border-t border-slate-100 dark:border-slate-800/40 flex flex-col md:flex-row items-center justify-between gap-6">
            <div class="flex items-center space-x-6">
                <button type="button" id="prev-step"
                    class="hidden h-14 px-8 border-2 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white rounded-2xl font-black uppercase tracking-widest text-[10px] hover:bg-slate-50 transition-all">
                    Précédent
                </button>
                <button type="button" id="auto-fill-btn"
                    class="flex items-center space-x-2 text-[10px] font-black uppercase tracking-widest text-brand-600 hover:text-brand-700 transition-colors">
                    <span class="w-1.5 h-1.5 rounded-full bg-brand-600"></span>
                    <span>Test avec données réelles</span>
                </button>
            </div>

            <div class="flex items-center space-x-4">
                <button type="button" id="next-step"
                    class="h-16 px-14 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-2xl font-black uppercase tracking-widest text-[10px] hover:scale-105 active:scale-95 transition-all shadow-xl shadow-slate-900/10 dark:shadow-white/5">
                    Suivant
                </button>
                <button type="submit" id="submit-prediction"
                    class="hidden h-16 px-16 bg-brand-600 text-white rounded-2xl font-black uppercase tracking-widest text-[10px] hover:scale-105 active:scale-95 transition-all shadow-xl shadow-brand-500/30">
                    Lancer l'Estimation
                </button>
            </div>
        </div>
    </form>
</div>

<!-- Result Card (Premium Ultra) -->
<div id="prediction-result" class="hidden mt-12 animate-fadeInUp">
    <div class="relative p-1 rounded-[4rem] bg-gradient-to-r from-brand-600 to-indigo-600 shadow-2xl">
        <div
            class="bg-white dark:bg-slate-950 rounded-[calc(4rem-4px)] p-12 lg:p-16 text-center space-y-8 relative overflow-hidden">
            <div class="absolute -top-24 -right-24 w-64 h-64 bg-brand-600/5 rounded-full blur-3xl"></div>

            <p class="text-[10px] font-black uppercase tracking-[0.5em] text-brand-600">Résultat de l'IA Laplace Immo
            </p>
            <h3 class="text-3xl font-black text-slate-900 dark:text-white">Valeur Estimée du Bien</h3>
            <div class="text-6xl md:text-8xl font-black text-slate-900 dark:text-white font-display tracking-tighter"
                id="predicted-price-value">$0</div>

            <div class="flex justify-center gap-4">
                <span
                    class="px-5 py-2 bg-slate-50 dark:bg-slate-900 rounded-full text-[10px] font-bold text-slate-500 uppercase tracking-widest border border-slate-100 dark:border-slate-800">Modèle
                    HuberRegressor</span>
                <span
                    class="px-5 py-2 bg-green-50 dark:bg-green-900/30 rounded-full text-[10px] font-bold text-green-600 dark:text-green-400 uppercase tracking-widest border border-green-100 dark:border-green-800">Précision
                    94.4%</span>
            </div>

            <div class="pt-8">
                <button type="button"
                    class="px-10 py-5 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-2xl font-black uppercase tracking-widest text-[10px] hover:scale-105 transition-all shadow-lg">
                    Télécharger le Rapport Complet
                </button>
            </div>
        </div>
    </div>
</div>